<!DOCTYPE html>
<html ng-app="respokeTrainingApp">
<head>
    <title>Respoke Training</title>
    <link rel="stylesheet"
          href="/css/bootstrap.min.css">
    <link rel="stylesheet"
          href="/angular-csp.css">
    <script src="/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/angular.min.js"></script>
    <script src="//cdn.respoke.io/respoke.min.js"></script>
    <script src="/respoke-training.min.js"></script>
</head>
<body class="ng-cloak" ng-cloak ng-class="{{ bodyClass }}"
      ng-controller="RespokeTrainingCtrl">
<div class="container">
    <h1>Respoke Training</h1>
    <div class="alert alert-danger" role="alert" ng-show="err">
        {{ err.message }}
    </div>

    <form>
        <div class="form-group">
            <label for="state">state</label>
            <input type="text" class="form-control" id="state" ng-value="state">
        </div>
        <div class="form-group">
            <label for="endpointId">endpointId</label>
            <input type="text" class="form-control" id="endpointId" ng-value="client && client.endpointId">
        </div>
        <div class="form-group">
            <label for="connectionId">connectionId</label>
            <input type="text" class="form-control" id="connectionId" ng-value="client && client.connectionId">
        </div>
    </form>

    <div ng-show="canSendMessage && canSendMessage()">
        <form>
            <div class="form-group">
                <label class="sr-only" for="sendMessageTo">To</label>
                <input type="text" class="form-control" id="sendMessageTo" placeholder="To" ng-model="message.endpointId">
            </div>
            <div class="form-group">
                <label class="sr-only" for="sendMessageToConnection">To connection</label>
                <input type="text" class="form-control" id="sendMessageToConnection" placeholder="To Connection" ng-model="message.connectionId">
            </div>
            <div class="form-group">
                <label for="message">Message</label>
                <textarea class="form-control" id="message" ng-model="message.message"></textarea>
            </div>
            <button type="button" class="btn btn-primary" ng-click="sendMessage()" ng-disabled="!messageReady()">Send</button>
        </form>

        <table class="table table-striped table-hover">
            <tr ng-repeat="msg in inbox">
                <td>{{ msg.timestamp }}</td>
                <td>{{ msg.endpointId }}</td>
                <td>{{ msg.message }}</td>
            </tr>
        </table>
    </div>
</div>
</body>
</html>
